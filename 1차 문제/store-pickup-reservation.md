# 스토어 픽업 예약

## 배경

무신사 오프라인 스토어에서 온라인 주문 픽업 서비스를 운영합니다. 구체적으로, `S`개의 스토어가 있으며, 각 스토어는 **스토어 ID**, **오픈 시간**, **마감 시간**, **시간당 픽업 한도**, **상품별 재고 정보**가 있습니다.

아래 규칙에 따라 `Q`개의 픽업 예약 요청을 순서대로 처리하세요.

## 규칙

1. 픽업 예약의 스토어 ID가 **존재하는 스토어**여야 합니다.
2. 픽업 예약의 희망 시간은 스토어의 **오픈 시간 이상 마감 시간 미만**이어야 합니다.
   - 예를 들어, 오픈 시간이 10시이고, 마감 시간이 20시라면, 희망 시간은 `10:00` **이상** `20:00` **미만**이어야 합니다.
3. 픽업 예약의 희망 시간이 속한 시간대의 **픽업 예약 수**가 스토어의 **시간당 픽업 한도 미만**이어야 합니다.
   - 여기서 희망 시간이 속한 시간대란, 희망 시간의 분을 제외한 **시간만 의미**합니다.
     - 예를 들어, 희망 시간이 `14:30`이라면, 이는 14**시대**의 예약입니다.
4. 픽업 예약의 요청 수량은 **스토어의 재고 이하**여야 합니다.
5. 픽업 예약에 성공하면, 해당 스토어의 재고가 요청 수량만큼 **차감**되며, 해당 시간대의 **픽업 예약 수**가 1만큼 증가합니다.
6. 요청은 **입력 순서**대로 처리해야 합니다.

## 입력

첫째 줄에 스토어의 수 `S`와 픽업 예약 요청 수 `R`이 쉼표를 두고 주어집니다.

다음 `S`개의 줄에 걸쳐, `i`번째 줄에 스토어 ID `N_i`, 오픈 시간 `L_i`, 마감 시간 `R_i`, 시간당 픽업 한도 `M_i`가 쉼표를 두고 주어집니다. 이는 `N_i`번 스토어에 대한 정보들을 나타냅니다.

다음 `S`개의 줄에 걸쳐, `j`번째 줄에 스토어 ID `N_j`와 **상품별 재고 정보**가 쉼표를 두고 주어집니다. 상품별 재고 정보의 경우, 상품 ID와 수량이 콜론(`:`)을 두고 주어집니다. 이때, `N_j`번 스토어에 재고가 존재하지 않으면, 상품 ID와 콜론, 수량 대신 하이픈(`-`)기호 하나만 주어집니다.

다음 `R`개의 줄에 걸쳐, `k`번째 줄에 요청 ID `P_k`, 스토어 ID `N_k`, 상품 ID `X_k`, 수량 `A_k`, 희망 시간 `T_k`가 쉼표를 두고 주어집니다.

### 제약 조건

- `1 <= S <= 5`
- `1 <= R <= 200`
- `1 <= N_i <= S`
- 주어지는 `N_i`의 값은 모두 다릅니다.
- `0 <= L_i < R_i <= 24`
- `1 <= M_i <= 10`
- `1 <= N_j <= S`
- 주어지는 `N_j`의 값은 모두 다릅니다.
- 하나의 스토어에 존재하는 재고 정보는 5개 이하입니다.
- 상품별 재고 정보가 주어질 때, 상품 ID는 `A001`, `A002`, `A003`, `A004`, `A005` 중 하나이며, 수량은 1 이상 100 이하의 정수입니다.
- `1 <= P_k <= R`
- `1 <= N_k <= 100`
- `X_k`는 `A001`, `A002`, `A003`, `A004`, `A005` 중 하나입니다.
- `1 <= A_k <= 10`
- `T_k`는 `HH:MM`의 형식이며, `00:00`부터 `23:59` 사이의 올바른 시간 형식으로 주어집니다.
- 입력으로 주어지는 모든 수는 정수입니다.

## 출력

주어진 `Q`개의 픽업 예약 요청에 대한 결과를 한 줄에 하나씩 입력 순서대로 출력해야 합니다. 만약 픽업 예약 요청이 성공한 경우, **요청 ID**와 `OK`를 쉼표를 두고 출력하며, 실패한 경우 **요청 ID**와 `FAIL`, **실패 사유**를 쉼표를 두고 출력합니다.

이때 각각의 실패 사유에 따라 출력해야 하는 문자열은 다음과 같으며, 실패 사유가 여러가지인 경우 **우선순위가 가장 높은** 실패 사유만 출력합니다.

| 우선순위 | 사유 | 설명 |
|---------|------|------|
| 1 | STORE | 존재하지 않는 스토어 |
| 2 | TIME | 운영 시간 외 |
| 3 | FULL | 해당 시간대 픽업 한도 초과 |
| 4 | STOCK | 재고 부족 |

이후, `Q+1`번째 줄에 **총 예약 성공 건수**를 출력합니다.

## 예제 설명

첫 번째 예제에서, 입력으로 주어진 스토어들의 정보는 다음과 같습니다.

- **스토어 1)** 오픈 시간: 10시, 마감 시간: 20시, 시간당 픽업 한도: 3건, 재고 A001: 10개, A002: 5개
- **스토어 2)** 오픈 시간: 11시, 마감 시간: 21시, 시간당 픽업 한도: 2건, 재고 A001: 8개, A003: 3개

이후 픽업 요청 처리 과정은 다음과 같습니다.

| 요청 ID | 스토어 ID | 상품 ID | 수량 | 희망 시간 | 성공 여부 | 사유 |
|--------|----------|--------|-----|---------|---------|------|
| 1 | 1 | A001 | 2 | 10:30 | OK | 10시대 픽업 한도 0/3 → 1/3, 재고 10 → 8 |
| 2 | 1 | A001 | 3 | 10:00 | OK | 10시대 픽업 한도 1/3 → 2/3, 재고 8 → 5 |
| 3 | 1 | A001 | 6 | 10:45 | FAIL | STOCK (재고 5 < 요청 6) |
| 4 | 1 | A002 | 2 | 09:30 | FAIL | TIME (09:30 < 10:00) |
| 5 | 2 | A001 | 5 | 15:00 | OK | 15시대 픽업 한도 0/2 → 1/2, 재고 8 → 3 |
| 6 | 2 | A003 | 5 | 20:30 | FAIL | STOCK (재고 3 < 요청 5) |
| 7 | 3 | A001 | 1 | 12:00 | FAIL | STORE (스토어 3 없음) |

## 입/출력 예시

### 예시 1

**입력**

```
2,7
1,10,20,3
2,11,21,2
1,A001:10,A002:5
2,A001:8,A003:3
1,1,A001,2,10:30
2,1,A001,3,10:00
3,1,A001,6,10:45
4,1,A002,2,09:30
5,2,A001,5,15:00
6,2,A003,5,20:30
7,3,A001,1,12:00
```

**출력**

```
1,OK
2,OK
3,FAIL,STOCK
4,FAIL,TIME
5,OK
6,FAIL,STOCK
7,FAIL,STORE
3
```

### 예시 2

**입력**

```
1,1
1,10,20,5
1,A001:10
1,1,A001,2,14:30
```

**출력**

```
1,OK
1
```

### 예시 3

**입력**

```
3,8
1,10,20,3
2,11,21,2
3,09,18,5
1,A001:10,A002:5
2,A001:8
3,-
1,1,A001,2,14:00
2,2,A001,3,15:00
3,3,A001,1,12:00
4,1,A002,2,14:30
5,2,A001,6,16:00
6,1,A001,5,14:45
7,3,A002,1,10:00
8,2,A002,1,20:00
```

**출력**

```
1,OK
2,OK
3,FAIL,STOCK
4,OK
5,FAIL,STOCK
6,OK
7,FAIL,STOCK
8,FAIL,STOCK
4
```
